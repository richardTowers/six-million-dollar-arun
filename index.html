<!doctype html>
<html>
	<head>
		<title>Socket.IO chat</title>
	</head>
	<body>
		<script src="/socket.io/socket.io.js"></script>
		<script>
		function getDirection (keyCode) {
			return { 87: 'left', 81: 'forward', 83: 'right', 65: 'backward' }[keyCode];
		}
		var socket = io(),
			depressedKeys = {};
		document.onkeydown = function (event) {
			if (!depressedKeys[event.keyCode]) {
				socket.emit(getDirection(event.keyCode) + '-on');
			}
			depressedKeys[event.keyCode] = true;
		};
		document.onkeyup = function (event) {
			socket.emit(getDirection(event.keyCode) + '-off');
			depressedKeys[event.keyCode] = false;
		};
		</script>
	</body>
</html>
